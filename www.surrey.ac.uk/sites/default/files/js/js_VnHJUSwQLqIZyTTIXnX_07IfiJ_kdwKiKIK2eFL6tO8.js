"use strict";function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class SurreyVideo{constructor(e,t,i,o){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;_defineProperty(this,"loadScript",()=>{if(!document.getElementById("".concat(this.type,"-api"))){const e=document.createElement("script");switch(this.type){case"youtube":e.src="https://www.youtube.com/iframe_api";break;case"vimeo":e.src="https://player.vimeo.com/api/player.js";break;case"panopto":e.src="https://developers.panopto.com/scripts/embedapi.min.js",e.defer=!0}e.id="".concat(this.type,"-api"),document.body.appendChild(e)}}),_defineProperty(this,"getEmbedCode",()=>{switch(this.type){case"youtube":case"vimeo":return'<div class="embed-responsive embed-responsive-16by9" data-video-id="'.concat(this.id,'">\n                  <iframe id="').concat(this.id,'" class="embed-responsive-item" src="').concat(this.url,"?").concat("youtube"===this.type?"enablejsapi=1&origin="+window.location.origin:"api=1",'&rel=0" loading="lazy" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen title="').concat(this.title,'"></iframe>\n                </div>');case"panopto":return'<div id="'.concat(this.id,'" class="embed-responsive embed-responsive-16by9" data-video-id="').concat(this.id,'"></div>')}}),_defineProperty(this,"setVideoPlayer",()=>{switch(this.type){case"youtube":this.player=new YT.Player(this.id,{events:{onReady:this.ytPlayVideo,onStateChange:this.ytPlayerStateChange}});break;case"vimeo":this.player=new Vimeo.Player(this.id);break;case"panopto":this.player=this.onPanoptoEmbedApiReady()}}),_defineProperty(this,"playVideo",()=>{this.setVideoPlayer(),"vimeo"===this.type&&this.vimeoPlayVideo()}),_defineProperty(this,"resumeVideo",()=>{if(this.isVideoPaused())switch(this.type){case"youtube":case"panopto":this.panoptoPauseOtherVideo="panopto"!==this.type,this.player.playVideo();break;case"vimeo":this.player.play()}}),_defineProperty(this,"isVideoPaused",()=>{if(!this.player)return null;switch(this.type){case"youtube":return this.videoPaused=2===this.player.playerInfo.playerState,this.videoPaused;case"vimeo":return this.videoPaused;case"panopto":return this.videoPaused=!!this.player.isPaused,this.videoPaused;default:return!1}}),_defineProperty(this,"pauseCurrentVideo",()=>{switch(this.type){case"youtube":case"panopto":this.player.pauseVideo();break;case"vimeo":this.player.pause(),this.videoPaused=!0}}),_defineProperty(this,"pauseOtherVideo",()=>{if(1<Object.keys(window.drupalSettings.surrey.video).length)for(const e in window.drupalSettings.surrey.video){const t=window.drupalSettings.surrey.video[e];if(t.id!==this.id&&document.getElementById(t.id)&&!1===t.isVideoPaused())switch(t.type){case"youtube":case"panopto":t.player.pauseVideo();break;case"vimeo":t.player.pause(),t.videoPaused=!0}}}),_defineProperty(this,"ytPlayVideo",e=>{e.target.playVideo(),e.target.g.focus()}),_defineProperty(this,"ytPlayerStateChange",e=>{1===e.data&&this.pauseOtherVideo()}),_defineProperty(this,"vimeoPlayVideo",()=>{this.player.play(),this.vimeoPlayerStateChange()}),_defineProperty(this,"vimeoPlayerStateChange",()=>{this.player.on("play",()=>{this.pauseOtherVideo(),this.videoPaused=!1}),this.player.on("loaded",()=>{this.player.element.focus()})}),_defineProperty(this,"onPanoptoEmbedApiReady",()=>{var e=this.url.split("?")[1];const t=new URLSearchParams(e);return new EmbedApi("".concat(this.id),{width:"100%",height:"100%",serverName:"surrey.cloud.panopto.eu",sessionId:t.get("id"),videoParams:{interactivity:"none",showtitle:!1,autoplay:!this.touchDevice,offerviewer:!1},events:{onIframeReady:this.onPanoptoIframeReady,onReady:this.onPanoptoVideoReady,onStateChange:this.onPanoptoStateUpdate}})}),_defineProperty(this,"onPanoptoIframeReady",()=>{this.touchDevice&&"glightbox"!==this.videoTarget||this.player.loadVideo()}),_defineProperty(this,"onPanoptoVideoReady",()=>{this.touchDevice&&"glightbox"!==this.videoTarget||(this.panoptoPauseOtherVideo=!1,this.player.playVideo())}),_defineProperty(this,"onPanoptoStateUpdate",e=>{1!==e||1===e&&"modal"===this.videoTarget&&this.panoptoPauseOtherVideo||(this.pauseOtherVideo(),this.panoptoPauseOtherVideo=!0)}),this.id=e,this.url=t,this.type=i,this.title=o,this.videoTarget=a,this.embedCode=this.getEmbedCode(),this.videoPaused,this.touchDevice=document.documentElement.classList.contains("touchevents"),this.loadScript()}};
"use strict";!function(e,i){e.behaviors.videoEmbed={attach(e){const a={globals:{components:document.querySelectorAll(".video-embed"),carouselId:"",desktopVideo:[]},init:()=>{a.globals.components.length&&(a.createDrupalVideoObject(),a.createVideoPlayers(),a.videoDesktop())},createDrupalVideoObject:()=>{i.surrey?i.surrey.video={}:i.surrey={video:{}}},createVideoPlayers:()=>{a.globals.components.forEach(e=>{var[o,d,t]=[e.dataset.videoId,e.dataset.videoType,e.classList.contains("glightbox-link")];i.surrey.video[o]=new SurreyVideo(o,e.dataset.videoUrl,d,e.dataset.videoTitle,e.dataset.videoTarget),t||a.globals.desktopVideo.push(e)})},videoDesktop:()=>{a.globals.desktopVideo.forEach(e=>{const[o,d]=[e.dataset.videoId,e.dataset.videoTarget];e.addEventListener("click",()=>{e.querySelector("#".concat(o))&&"modal"===d?i.surrey.video[o].resumeVideo():((e="modal"===d?document.querySelector("#videoModal .modal-body"):e).innerHTML=i.surrey.video[o].embedCode,i.surrey.video[o].playVideo())})})}};a.init()}}}(Drupal,drupalSettings);;
"use strict";!function(e,t){e.behaviors.lightboxComponent={attach(e){const i={globals:{elems:".glightbox-link",lightboxGalleries:[],lightboxLinksVideo:[],lightboxes:{}},init(){i.getLightboxLinks(),i.initialiseLightboxes(),i.getVideoLinks()},getLightboxLinks(){const e=document.querySelectorAll(i.globals.elems);if(e.length){let l;e.forEach(e=>{e.dataset.galleryId!==l&&i.globals.lightboxGalleries.push({galleryId:e.dataset.galleryId,type:e.dataset.videoId?"video":"image"}),l=e.dataset.galleryId,e.dataset.videoId&&i.globals.lightboxLinksVideo.push({id:e.dataset.videoId,galleryId:e.dataset.galleryId})})}},initialiseLightboxes(){i.globals.lightboxGalleries.forEach(e=>{var l=e.galleryId,a=document.querySelectorAll('[data-gallery-id="'.concat(l,'"]')).length,a={gallery:GLightbox({selector:".".concat(l),slideEffect:"fade",moreLength:0,loop:1<a,draggable:!1,preload:"video"!==e.type})};"video"===e.type?(i.globals.lightboxes[l]=a,i.makeVideoSlides(l),i.addVideoEvents(a)):i.addImageEvents(a)})},makeVideoSlides(l){const a=[];i.globals.lightboxLinksVideo.forEach(e=>{e.galleryId===l&&a.push({content:'<div class="highlight-video-embed">'.concat(t.surrey.video[e.id].embedCode,"</div>")})}),i.globals.lightboxes[l].gallery.setElements(a)},getVideoLinks(){let l,a=0;i.globals.lightboxLinksVideo.forEach(e=>{e.galleryId!==l&&(a=0),i.addVideoClickHandler(e,a),l=e.galleryId,a+=1})},addVideoClickHandler(l,a){const e=document.querySelector('[data-video-id="'.concat(l.id,'"]'));e.addEventListener("click",e=>{e.preventDefault(),i.globals.lightboxes[l.galleryId].gallery.openAt(a)})},addVideoEvents(a){a.gallery.on("slide_after_load",e=>{e=e.slide.querySelector("[data-video-id]").dataset.videoId;t.surrey.video[e].playVideo()}),a.gallery.on("slide_changed",()=>{var e=a.gallery.activeSlide.querySelector("[data-video-id]").dataset["videoId"];const l=t.surrey.video[e];l.isVideoPaused()&&l.resumeVideo()})},addImageEvents(i){i.gallery.on("slide_after_load",e=>{var l=i.gallery.elements[i.gallery.index].node.dataset["credit"];const a=i.gallery.activeSlide.querySelector(".gslide-image");l&&!a.querySelector(".glightbox-credit")&&(a.innerHTML+='<div class="py-2 px-4 glightbox-credit"><small>Credit: '.concat(l,"</small></div>"))}),i.gallery.on("slide_changed",e=>{var{}=e,e=i.gallery.elements[i.gallery.index].node.ariaLabel;const l=i.gallery.activeSlide.querySelector("img");e&&l.setAttribute("alt",e)})}};i.init()}}}(Drupal,drupalSettings);;
!function(e,t){"function"==typeof define&&define.amd?define("priorityNav",t(e)):"object"==typeof exports?module.exports=t(e):e.priorityNav=t(e)}(window||this,function(e){"use strict";function t(e,t,n){if("[object Object]"===Object.prototype.toString.call(e))for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(n,e[o],o,e);else for(var r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e)}var i,s,l,d,c,a,u,p={},v=[],m=!!document.querySelector&&!!e.addEventListener,f={},h=0,y=0,w={initClass:"js-priorityNav",mainNavWrapper:"nav",mainNav:"ul",navDropdownClassName:"nav__dropdown",navDropdownToggleClassName:"nav__dropdown-toggle",navDropdownLabel:"more",navDropdownBreakpointLabel:"menu",breakPoint:500,throttleDelay:50,offsetPixels:0,count:!0,moved:function(){},movedBack:function(){}};function o(e,t){var n,o;e.classList?e.classList.toggle(t):(0<=(o=(n=e.className.split(" ")).indexOf(t))?n.splice(o,1):n.push(t),e.className=n.join(" "))}function n(e){var t,n;t=e,n=window.getComputedStyle(t),n=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight),s=t.clientWidth-n,e.querySelector(c).parentNode===e&&e.querySelector(c).offsetWidth,l=q(e)+f.offsetPixels,t=document,n=window,t=t.compatMode&&"CSS1Compat"===t.compatMode?t.documentElement:t.body,e=t.clientWidth,t=t.clientHeight,n.innerWidth&&e>n.innerWidth&&(e=n.innerWidth,t=n.innerHeight),y=e}function r(e,t){e.querySelector(a).setAttribute("priorityNav-count",v[t].length)}function S(t,n){window.attachEvent?window.attachEvent("onresize",function(){p.doesItFit&&p.doesItFit(t)}):window.addEventListener&&window.addEventListener("resize",function(){p.doesItFit&&p.doesItFit(t)},!0),t.querySelector(a).addEventListener("click",function(){o(t.querySelector(c),"show"),o(this,"is-open"),o(t,"is-open"),-1!==t.className.indexOf("is-open")?t.querySelector(a).setAttribute("aria-expanded","true"):(t.querySelector(a).setAttribute("aria-expanded","false"),t.querySelector(c).blur())}),document.addEventListener("click",function(e){!function(e,t){for(var n=t.charAt(0);e&&e!==document;e=e.parentNode)if("."===n){if(e.classList.contains(t.substr(1)))return e}else if("#"===n){if(e.id===t.substr(1))return e}else if("["===n&&e.hasAttribute(t.substr(1,t.length-2)))return e;return!1}(e.target,"."+n.navDropdownClassName)&&e.target!==t.querySelector(a)&&(t.querySelector(c).classList.remove("show"),t.querySelector(a).classList.remove("is-open"),t.classList.remove("is-open"))}),document.onkeydown=function(e){27===(e=e||window.event).keyCode&&(document.querySelector(c).classList.remove("show"),document.querySelector(a).classList.remove("is-open"),i.classList.remove("is-open"))}}function g(e){return"."!==(e=e.charAt(0))&&"#"!==e}p.doesItFit=function(t){var o,r,i,a,e=0===t.getAttribute("instance")?e:f.throttleDelay;o=function(){var e=t.getAttribute("instance");for(n(t);s<=l&&0<t.querySelector(d).children.length||y<f.breakPoint&&0<t.querySelector(d).children.length;)p.toDropdown(t,e),n(t),y<f.breakPoint&&L(t,e,f.navDropdownBreakpointLabel);for(;s>=v[e][v[e].length-1]&&y>f.breakPoint;)p.toMenu(t,e),y>f.breakPoint&&L(t,e,f.navDropdownLabel);v[e].length<1&&(t.querySelector(c).classList.remove("show"),L(t,e,f.navDropdownLabel)),t.querySelector(d).children.length<1?(t.classList.add("is-empty"),L(t,e,f.navDropdownBreakpointLabel)):t.classList.remove("is-empty"),b(t,e)},r=e,function(){var e=this,t=arguments,n=i&&!a;clearTimeout(a),a=setTimeout(function(){a=null,i||o.apply(e,t)},r),n&&o.apply(e,t)}()};var b=function(e,t){v[t].length<1?(e.querySelector(a).classList.add("priority-nav-is-hidden"),e.querySelector(a).classList.remove("priority-nav-is-visible"),e.classList.remove("priority-nav-has-dropdown")):(e.querySelector(a).classList.add("priority-nav-is-visible"),e.querySelector(a).classList.remove("priority-nav-is-hidden"),e.classList.add("priority-nav-has-dropdown"))},L=function(e,t,n){e.querySelector(a).innerHTML=n},q=(p.toDropdown=function(e,t){e.querySelector(c).firstChild&&0<e.querySelector(d).children.length?e.querySelector(c).insertBefore(e.querySelector(d).lastElementChild,e.querySelector(c).firstChild):0<e.querySelector(d).children.length&&e.querySelector(c).appendChild(e.querySelector(d).lastElementChild),v[t].push(l),b(e,t),0<e.querySelector(d).children.length&&f.count&&r(e,t),f.moved()},p.toMenu=function(e,t){0<e.querySelector(c).children.length&&e.querySelector(d).appendChild(e.querySelector(c).firstElementChild),v[t].pop(),b(e,t),0<e.querySelector(d).children.length&&f.count&&r(e,t),f.movedBack()},function(e){for(var t=e.childNodes,n=0,o=0;o<t.length;o++)3===t[o].nodeType||isNaN(t[o].offsetWidth)||(n+=t[o].offsetWidth);return n});Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var e=0,t=this.length;e<t;e++)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])},p.destroy=function(){f&&(document.documentElement.classList.remove(f.initClass),u.remove(),f=null,delete p.init,delete p.doesItFit)},m&&"undefined"!=typeof Node&&(Node.prototype.insertAfter=function(e,t){this.insertBefore(e,t.nextSibling)});return p.init=function(e){var n,o,r;o=e||{},r={},t(n=w,function(e,t){r[t]=n[t]}),t(o,function(e,t){r[t]=o[t]}),f=r,m||"undefined"!=typeof Node?g(f.navDropdownClassName)&&g(f.navDropdownToggleClassName)?(e=document.querySelectorAll(f.mainNavWrapper),t(e,function(e){var t,n;v[h]=[],e.setAttribute("instance",h++),(i=e)?(d=f.mainNav,e.querySelector(d)?(t=e,n=f,u=document.createElement("span"),c=document.createElement("ul"),(a=document.createElement("button")).innerHTML=n.navDropdownLabel,a.setAttribute("type","button"),a.setAttribute("aria-haspopup","true"),a.setAttribute("aria-expanded","false"),a.setAttribute("aria-controls","dropdownMenuButton"),c.setAttribute("id","dropdownMenuButton"),t.querySelector(d).parentNode!==t?console.warn("mainNav is not a direct child of mainNavWrapper, double check please"):(t.insertAfter(u,t.querySelector(d)),u.appendChild(a),u.appendChild(c),c.classList.add(n.navDropdownClassName),c.classList.add("priority-nav__dropdown"),a.classList.add(n.navDropdownToggleClassName),a.classList.add("priority-nav__dropdown-toggle"),a.setAttribute("type","button"),u.classList.add(n.navDropdownClassName+"-wrapper"),u.classList.add("priority-nav__wrapper"),t.classList.add("priority-nav")),c="."+f.navDropdownClassName,e.querySelector(c)?(a="."+f.navDropdownToggleClassName,e.querySelector(a)?(S(e,f),p.doesItFit(e)):console.warn("couldn't find the specified navDropdownToggle element")):console.warn("couldn't find the specified navDropdown element")):console.warn("couldn't find the specified mainNav element")):console.warn("couldn't find the specified mainNavWrapper element")}),document.documentElement.classList.add(f.initClass)):console.warn("No symbols allowed in navDropdownClassName & navDropdownToggleClassName. These are not selectors."):console.warn("This browser doesn't support priorityNav")},p});;
"use strict";Drupal.behaviors.subnav={attach(t){const n={globals:{subnavContainer:null},init(){n.globals.subnavContainer.classList.add("js-nav-processed");var t=n.globals.subnavContainer.classList.contains("section-priority-nav")?".section-priority-nav":".section-priority-nav-ie",s=(priorityNav.init({mainNavWrapper:t,navDropdownClassName:"subnav-priority",navDropdownLabel:"More",breakPoint:980,throttleDelay:"50"}),setTimeout(function(){const t=document.querySelector(".subnav-priority-wrapper");var s=document.querySelector(".subnav-priority-wrapper button").getAttribute("prioritynav-count");10<s&&t.classList.add("sub-two-nav"),20<s&&t.classList.add("sub-three-nav")},50),document.getElementsByClassName("section-links__link"));for(let t=0;t<s.length;t++){const e=s[t];var a=s[t].textContent;e.setAttribute("title",a)}},showBreadcrumb(){const t=document.getElementsByClassName("site-section-breadcrumb")[0],s=document.getElementsByClassName("section-priority-nav")[0];t&&t.classList.add("active"),s&&s.classList.add("active")}};n.globals.subnavContainer=document.getElementsByClassName("section-priority-nav")[0],n.globals.subnavContainer&&!n.globals.subnavContainer.classList.contains("js-nav-processed")&&n.init(),n.showBreadcrumb()}};;
"use strict";const debounce=function(i){let e;return function(){const n=this,t=arguments;e&&window.cancelAnimationFrame(e),e=window.requestAnimationFrame(function(){i.apply(n,t)})}};;
"use strict";Drupal.behaviors.navigation={attach(e){const l={globals:{closeDropdownRef:null,navWrapper:null,currentlyOpen:{type:null,element:null,desktopButton:null},search:{id:"search",button:null,dropdown:null,isOpen:!1,input:null,hasSuggestions:!1,suggestions:[],currentTerm:null,suggestionsElement:document.getElementById("suggestions"),icons:document.getElementById("search-dropdown-icons"),submitButtonContainer:document.getElementById("search-dropdown-submit-button-container"),submitButton:document.getElementById("search-dropdown-submit-button"),form:document.getElementById("search-dropdown-form")},mobile:{id:"mobile",button:null,dropdown:null,isOpen:!1},desktop:{id:"desktop",buttons:null,isOpen:!1}},init(){l.globals.navWrapper=document.getElementById("global-nav"),l.globals.navWrapper.classList.contains("js-nav-processed")||(l.getElements(),l.addClickHandlers(),l.addCloseHandlers(),l.hideContainers(),l.addProcessedClass(),l.addSearchHandler())},addSearchHandler(){const e=l.globals.search["input"];e.addEventListener("input",function(e){if(0===this.value.length)return l.clearSuggestions(),l.adjustIconLinksVisibility("show"),void l.adjustSearchSubmitButtonVisibility("hide");l.adjustSearchSubmitButtonVisibility("show"),l.adjustIconLinksVisibility("hide"),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{l.globals.search.currentTerm=this.value,l.getSuggestions(this.value)},250)}),e.addEventListener("keyup",function(e){e.preventDefault(),"ArrowDown"!==e.key&&"Down"!==e.key||"ArrowDown"!==e.key&&"Down"!==e.key||l.globals.search.hasSuggestions&&l.globals.search.suggestionsElement.firstChild.focus()})},getSuggestions(e){e=encodeURIComponent(e),e=new Request("https://surrey-search.clients.uk.funnelback.com/s/suggest.json?collection=surrey-meta&show=5&partial_query=".concat(e));fetch(e).then(e=>{if(200===e.status)return e.json();throw new Error("Something went wrong on api server!")}).then(e=>{e=e.filter((e,n,o)=>o.indexOf(e)==n).slice(0,3);l.updateSuggestions(e)}).catch(e=>console.error(e))},submitForm(){l.globals.search.form.submit()},clearSuggestions(){l.globals.search.hasSuggestions=!1,l.globals.search.suggestionsElement.innerHTML=""},updateSuggestions(e){const{suggestionsElement:n,input:t}=l.globals.search;if(0!==e.length){let o="";e.forEach((e,n)=>{e='<a class="search-suggestion d-block text-white" href="/search?query='.concat(encodeURIComponent(e),'">').concat(e,"</a>");o+=e}),n.innerHTML=o,l.globals.search.hasSuggestions=!0;const s=document.querySelectorAll(".search-suggestion");s.forEach(e=>{e.addEventListener("keydown",function(e){["Up","Down","ArrowUp","ArrowDown"].includes(e.key)&&(e.preventDefault(),"ArrowDown"===e.key||"Down"===e.key?e.target.nextElementSibling&&e.target.nextElementSibling.focus():"ArrowUp"!==e.key&&"Up"!==e.key||(e.target.previousElementSibling?e.target.previousElementSibling.focus():(e=t.value["length"],t.setSelectionRange(e,e),t.focus())))})})}},adjustIconLinksVisibility(e){const n=l.globals.search["icons"];if(e&&n)switch(e){case"hide":n.classList.add("d-none");break;case"show":n.classList.remove("d-none")}},adjustSearchSubmitButtonVisibility(e){const n=l.globals.search["submitButtonContainer"];if(e&&n)switch(e){case"hide":n.classList.add("d-none");break;case"show":n.classList.remove("d-none")}},closeDropdownOnScrollPosition(){const e=document.querySelector(".search-container");window.scrollY>window.pageYOffset+e.getBoundingClientRect().top+e.offsetHeight&&l.closeOpenDropdown()},addScrollHandler(){window.addEventListener("scroll",l.globals.closeDropdownRef=debounce(l.closeDropdownOnScrollPosition))},removeScrollHandler(){window.removeEventListener("scroll",l.globals.closeDropdownRef)},addProcessedClass(){l.globals.navWrapper.classList.add("js-nav-processed")},getElements(){l.globals.desktop.buttons=document.getElementById("global-nav-inner").querySelectorAll(".nav-item > .nav-link"),l.globals.mobile.button=document.getElementById("mobile-nav-toggle"),l.globals.mobile.dropdown=document.getElementById("mobile-nav"),l.globals.search.button=document.getElementById("search-dropdown-button"),l.globals.search.dropdown=document.getElementById("js-search-container"),l.globals.search.input=document.getElementById("dropdownSearchTermInput")},addClickHandlers(){const{desktop:e,mobile:n,search:o}=l.globals;e.buttons.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();e=l.isSomethingElseOpen().isDesktopOpen;e&&this.parentNode===l.globals.currentlyOpen.element?l.closeOpenDropdown():(e&&this.parentNode!==l.globals.currentlyOpen.element&&l.closeOpenDropdown(),l.openDesktopDropdown(this))})}),n.button.addEventListener("click",function(e){e.preventDefault();e=l.isSomethingElseOpen().isMobileOpen;e?l.closeOpenDropdown():l.openMobileDropdown()}),o.button.addEventListener("click",function(e){e.preventDefault();e=l.isSomethingElseOpen().isSearchOpen;if(e)l.closeOpenDropdown();else{l.openSearchDropdown();const n=document.getElementById("dropdownSearchTermInput");n.focus()}}),o.submitButton.addEventListener("click",function(e){e.preventDefault(),o.form.submit()})},hideContainers(){const e=l.globals.navWrapper.querySelectorAll(".nav-container a");e.forEach(e=>{e.textContent.includes("Container")&&e.parentNode.classList.add("bodged-nav")})},addCloseHandlers(){document.addEventListener("keyup",e=>{"Escape"===e.key&&l.closeOpenDropdown()}),document.addEventListener("click",e=>{l.globals.navWrapper.contains(e.target)||l.closeOpenDropdown()})},openDesktopDropdown(e){var n=l.isSomethingElseOpen()["isSearchOpen"];n&&l.closeOpenDropdown(),e.parentNode.classList.add("nav-active"),e.setAttribute("aria-expanded",!0),l.globals.desktop.isOpen=!0,l.globals.currentlyOpen.element=e.parentNode,l.globals.currentlyOpen.desktopButton=e,l.globals.currentlyOpen.type=l.globals.desktop.id},openMobileDropdown(){var e=l.isSomethingElseOpen()["isSearchOpen"];e&&l.closeOpenDropdown(),l.globals.mobile.dropdown.classList.remove("d-none"),l.globals.mobile.button.classList.add("mobile-nav-open"),l.globals.mobile.button.setAttribute("aria-expanded",!0),l.globals.mobile.isOpen=!0,l.globals.currentlyOpen.element=l.globals.mobile.dropdown,l.globals.currentlyOpen.type=l.globals.mobile.id},openSearchDropdown(){var{isDesktopOpen:e,isMobileOpen:n}=l.isSomethingElseOpen();(e||n)&&l.closeOpenDropdown(),l.globals.search.dropdown.classList.add("nav-active"),l.globals.search.button.setAttribute("aria-expanded",!0),l.globals.search.isOpen=!0,l.addScrollHandler(),l.globals.currentlyOpen.element=l.globals.search.dropdown,l.globals.currentlyOpen.type=l.globals.search.id},closeOpenDropdown(){var e=l.globals.currentlyOpen["type"];if(e){switch(e){case l.globals.mobile.id:l.globals.currentlyOpen.element.classList.add("d-none"),l.globals.mobile.button.classList.remove("mobile-nav-open"),l.globals.mobile.button.setAttribute("aria-expanded",!1),l.globals.mobile.isOpen=!1;break;case l.globals.search.id:l.globals.currentlyOpen.element.classList.remove("nav-active"),l.globals.search.button.setAttribute("aria-expanded",!1),l.globals.search.isOpen=!1,l.removeScrollHandler();break;case l.globals.desktop.id:l.globals.currentlyOpen.element.classList.remove("nav-active"),l.globals.currentlyOpen.desktopButton.setAttribute("aria-expanded",!1),l.globals.desktop.isOpen=!1}l.globals.currentlyOpen={type:null,element:null,desktopButton:null}}},isSomethingElseOpen(e){var{desktop:n,mobile:o,search:t}=l.globals;return{isDesktopOpen:n.isOpen,isMobileOpen:o.isOpen,isSearchOpen:t.isOpen}}};l.init()}};;
